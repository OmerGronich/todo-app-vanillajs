!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(0);function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.addTodoInput=document.getElementById("add-todo"),this.list=document.getElementById("list"),this.toggleAllBtn=document.getElementById("toggle-all"),this.toolTip=document.getElementById("tooltip"),this.todosManager=e,this.listFinished=document.getElementById("list-finished")}var e,n,i;return e=t,(n=[{key:"clearInput",value:function(){this.addTodoInput.value=""}},{key:"clearList",value:function(){this.list.innerHTML=""}},{key:"clearFinishedList",value:function(){this.listFinished.innerHTML=""}},{key:"checkIfDone",value:function(){o(this.listFinished.children).forEach((function(t){t.querySelector("#completed-".concat(t.dataset.id))&&t.querySelector(".list-item__content").classList.add("done")}))}},{key:"setTodoIconHTML",value:function(t,e){return'<i id="'.concat(t?"":"not-","completed-").concat(e,'" class="far fa-').concat(t?"check-":"",'circle btn btn--toggle-one"></i>')}},{key:"createListItemHTML",value:function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return o?'\n\t\t\t<div class="list-item__left">\n\t\t\t\t<span class="hidden">'.concat(t,'</span>\n\t\t\t\t<input class="list-item__input" type="text" value="').concat(e,'">\n\t\t\t</div>'):'\n\t\t<div class="list-item__left">\n\t\t\t'.concat(t,'\n\t\t\t<div class="list-item__content">').concat(e,'</div>\n\t\t</div>\n\t\t<div class="list-item__right">\n\t\t\t<em class="list-item__date">').concat(new Date(n).toDateString(),'</em>\n\t\t\t<i class="fas fa-times btn btn--remove">\n\t\t</div>')}},{key:"attachListeners",value:function(t,e,n){this.attachEditListener(t),this.attachRemoveBtnListener(t,e),this.attachToggleBtnListener(t,e,n)}},{key:"attachRemoveBtnListener",value:function(t,e){var n=this;t.querySelector(".btn--remove").addEventListener("click",(function(){n.todosManager.removeTodo(e),n.renderTodoList()}))}},{key:"attachToggleBtnListener",value:function(t,e,n){var o=this;t.querySelector("#".concat(n?"":"not-","completed-").concat(e)).addEventListener("click",(function(){o.todosManager.toggleIsDone(e),o.renderTodoList()}))}},{key:"attachEditListener",value:function(t){var e=this;t.querySelector(".list-item__content").addEventListener("dblclick",(function(n){e.editState(t.dataset.id)})),t.querySelector(".list-item__date").addEventListener("dblclick",(function(n){e.editState(t.dataset.id)}))}},{key:"renderTodoList",value:function(){this.clearList(),this.clearFinishedList();var t=this.todosManager.todos;if(Object.keys(t).length)for(var e in t){var n=t[e],o=document.createElement("li");o.dataset.id=n._id,o.classList.add("list-item");var i=this.setTodoIconHTML(n.isDone,o.dataset.id);o.innerHTML=this.createListItemHTML(i,n.content,n.dateCreated),this.attachListeners(o,n._id,n.isDone),n.isDone?this.listFinished.append(o):this.list.append(o),this.toggleAllBtn.classList.remove("hidden"),this.toolTip.classList.remove("hidden")}else this.toggleAllBtn.classList.add("hidden"),this.toolTip.classList.add("hidden");this.checkIfDone()}},{key:"editState",value:function(t){var e=this,n=document.querySelector('[data-id="'.concat(t,'"]'));n.classList.add("box-shadow-inset");var o=this.todosManager.todos,i=function(t){var i=o[t];if(i._id===n.dataset.id){var r=e.setTodoIconHTML(i.isDone,n.dataset.id);n.innerHTML=e.createListItemHTML(r,i.content,i.dateCreatedtrue,!0);var a=n.querySelector("input");setTimeout((function(){a.focus()}),0),a.selectionStart=a.selectionEnd=1e4,a.addEventListener("keydown",(function(t){13===t.keyCode&&t.target.value&&(n.innerHTML=e.createListItemHTML(r,t.target.value,i.dateCreated),n.classList.remove("box-shadow-inset"),e.attachListeners(n,i._id,i.isDone),e.todosManager.editTodo(i._id,t.target.value),a.blur(),e.checkIfDone())})),a.addEventListener("blur",(function(t){var o=t.target.value||i.content;n.innerHTML=e.createListItemHTML(r,o,i.dateCreated),n.classList.remove("box-shadow-inset"),e.attachListeners(n,i._id,i.isDone),e.todosManager.editTodo(i._id,o),e.checkIfDone()}))}};for(var r in o)i(r)}}])&&r(e.prototype,n),i&&r(e,i),t}();function s(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var d=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,o=[{key:"getTodos",value:function(){try{return localStorage.todoList?JSON.parse(localStorage.todoList):{}}catch(t){return console.log("Error parsing todos from local storage",t),{}}}},{key:"saveTodos",value:function(t){localStorage.setItem("todoList",JSON.stringify(t))}}],(n=null)&&s(e.prototype,n),o&&s(e,o),t}(),c="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),l=new Uint8Array(16);function u(){if(!c)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return c(l)}for(var f=[],v=0;v<256;++v)f.push((v+256).toString(16).substr(1));var h=function(t,e){var n=e||0,o=f;return(o[t[n+0]]+o[t[n+1]]+o[t[n+2]]+o[t[n+3]]+"-"+o[t[n+4]]+o[t[n+5]]+"-"+o[t[n+6]]+o[t[n+7]]+"-"+o[t[n+8]]+o[t[n+9]]+"-"+o[t[n+10]]+o[t[n+11]]+o[t[n+12]]+o[t[n+13]]+o[t[n+14]]+o[t[n+15]]).toLowerCase()};var y=function(t,e,n){"string"==typeof t&&(e="binary"===t?new Uint8Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||u)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e){for(var i=n||0,r=0;r<16;++r)e[i+r]=o[r];return e}return h(o)};function m(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var g=new(function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.Store=e,this.todos=this.Store.getTodos(),this.sortTodosByDate()}var e,n,o;return e=t,(n=[{key:"addTodo",value:function(t){if(t){var e={content:t,dateCreated:Date.now(),isDone:!1,_id:y()};this.todos[e._id]=e,this.Store.saveTodos(this.todos)}}},{key:"editTodo",value:function(t,e){this.todos[t].content=e,this.Store.saveTodos(this.todos)}},{key:"removeTodo",value:function(t){delete this.todos[t],this.Store.saveTodos(this.todos)}},{key:"toggleIsDone",value:function(t){var e=this.todos[t];e.isDone=!e.isDone,this.Store.saveTodos(this.todos)}},{key:"toggleAll",value:function(){var t;for(var e in this.todos){if(!this.todos[e].isDone){t=!1;break}t=!0}for(var n in this.todos)this.todos[n].isDone=!t;this.Store.saveTodos(this.todos)}},{key:"sortTodosByDate",value:function(t){var e=[];for(var n in this.todos)e.push([n,this.todos[n]]);e.sort((function(t,e){return t[1].dateCreated-e[1].dateCreated}));var o=e.reduce((function(t,e){return t[e[0]]=e[1],t}),{});this.todos=o}}])&&m(e.prototype,n),o&&m(e,o),t}())(d),p=new a(g);document.addEventListener("DOMContentLoaded",(function(){p.renderTodoList()})),p.addTodoInput.addEventListener("keydown",(function(t){13===t.keyCode&&(g.addTodo(t.target.value),p.clearInput(),p.renderTodoList())})),p.toggleAllBtn.addEventListener("click",(function(t){g.toggleAll(),p.renderTodoList()}))}]);